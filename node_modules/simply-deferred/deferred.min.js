!function(){var n,r,e,t,u,l,o,i,a,c,s,f,p,h,g=[].slice;u="2.3.0",r="pending",t="resolved",e="rejected",a=function(n,r){return null!=n?n.hasOwnProperty(r):void 0},s=function(n){return a(n,"length")&&a(n,"callee")},f=function(n){return a(n,"promise")&&"function"==typeof(null!=n?n.promise:void 0)},i=function(n){return s(n)?i(Array.prototype.slice.call(n)):Array.isArray(n)?n.reduce(function(n,r){return Array.isArray(r)?n.concat(i(r)):(n.push(r),n)},[]):[n]},l=function(n,r){return 0>=n?r():function(){return--n<1?r.apply(this,arguments):void 0}},p=function(n,r){return function(){var e;return e=[n].concat(Array.prototype.slice.call(arguments,0)),r.apply(this,e)}},o=function(n,r,e){var t,u,l,o,a;for(o=i(n),a=[],u=0,l=o.length;l>u;u++)t=o[u],a.push(t.call.apply(t,[e].concat(g.call(r))));return a},n=function(){var u,l,a,c,s,p;return p=r,c=[],s=[],a={},this.promise=function(u){var l,h;return u=u||{},u.state=function(){return p},h=function(n,e){return function(){return p===r&&e.push.apply(e,i(arguments)),n()&&o(arguments,a),u}},u.done=h(function(){return p===t},c),u.fail=h(function(){return p===e},s),u.always=function(){var n;return(n=u.done.apply(u,arguments)).fail.apply(n,arguments)},l=function(r,e){var t,l;return t=new n,l=function(n,r,e){return e?u[n](function(){var t,u;return t=1<=arguments.length?g.call(arguments,0):[],u=e.apply(null,t),f(u)?u[n](function(){var n;return n=1<=arguments.length?g.call(arguments,0):[],r.apply(null,n)}):r(u)}):u[n](function(){var n;return n=1<=arguments.length?g.call(arguments,0):[],r.apply(null,n)})},l("done",t.resolve,r),l("fail",t.reject,e),t},u.pipe=l,u.then=l,null==u.promise&&(u.promise=function(){return u}),u},this.promise(this),u=this,l=function(n,e,t){return function(){return p===r?(p=n,a=arguments,o(e,a,t),u):this}},this.resolve=l(t,c),this.reject=l(e,s),this.resolveWith=function(n,r){return l(t,c,n).apply(null,r)},this.rejectWith=function(n,r){return l(e,s,n).apply(null,r)},this},h=function(){var r,e,t,u,o,a,c;if(e=i(arguments),o=new n,!e.length)return o.resolve().promise();for(u=[],t=l(e.length,function(){return o.resolve.apply(o,u)}),e.forEach(function(n,r){return f(n)?n.done(function(){var n;return n=1<=arguments.length?g.call(arguments,0):[],u[r]=n.length>1?n:n[0],t()}):(u[r]=n,t())}),a=0,c=e.length;c>a;a++)r=e[a],f(r)&&r.fail(o.reject);return o.promise()},c=function(r){return r.Deferred=function(){return new n},r.ajax=p(r.ajax,function(r,e){var t,u,l,o;return null==e&&(e={}),u=new n,t=function(n,r){return p(n,function(){var n,e;return e=arguments[0],n=2<=arguments.length?g.call(arguments,1):[],e&&e.apply(null,n),r.apply(null,n)})},e.success=t(e.success,u.resolve),e.error=t(e.error,u.reject),o=r(e),l=u.promise(),l.abort=function(){return o.abort()},l}),r.when=h},"undefined"!=typeof exports?(exports.Deferred=function(){return new n},exports.when=h,exports.installInto=c):(this.Deferred=function(){return new n},this.Deferred.when=h,this.Deferred.installInto=c)}.call(this);